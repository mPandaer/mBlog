---
title: GateWay API 网关
slug: gateway-api-symina-z1wpfai
url: /post/gateway-api-symina-z1wpfai.html
date: '2024-06-16 15:10:11+08:00'
lastmod: '2024-06-16 15:44:40+08:00'
toc: true
isCJKLanguage: true
---

# GateWay API 网关

# 什么是API 网关

简而言之，就是我们API的入口，大门，可以类比火车站的检票口

API 网关主要提供以下功能

1. **请求路由**
2. **请求和响应的修改**
3. 负载均衡
4. 鉴权
5. 流量控制
6. 协议转换
7. 日志记录和监控
8. 缓存

我认为其中最为核心的当属 **路由**，以及对**请求体和响应体的增删改查**

## GateWay 网关

在Spring的生态中，供我们使用的API网关，有两个，一个是Zuul，一个是Spring Cloud Gateway,目前主流是 Gateway, 那么我们就来看看GateWay.

学习一个新工具，最为官方的资源莫过于[官方文档](https://docs.spring.io/spring-cloud-gateway/reference/index.html)，以下内容都是来自我对官方文档的理解，你也可以尝试自己梳理。

快速入门一个工具，根据二八定律，核心的知识只有20%，所以对于我们而言只需要先掌握这20%的知识就好了，那究竟那些内容是核心呢？三个办法，一个办法是看这个工具的热门面试题，从中就可以知道核心内容有那些了，第二个办法就是看一些人录制的教程大纲，里面基本上也是核心内容，最后一个办法，也是我比较推荐你先去尝试的办法，如果文档中有指出这个工具由那些组件构成，那么这些组件就是核心内容。而GateWay的[官网](https://docs.spring.io/spring-cloud-gateway/reference/spring-cloud-gateway/glossary.html)中明确指出了GateWay的三个核心组件 路由，断言，过滤器，接下来我们就需要明白这些组件的作用，

对于路由，它决定了来到GateWay的请求应该去往何处，对于断言 它决定了来到GateWay的请求如果匹配上路由，对于过滤器，他决定了匹配上路由的请求，会进行哪些针对请求头 or响应头的操作，这里的过滤器和Servlet中的过滤器作用相似。明白了这些组件各自的作用，我们需要明白组件之间的关系，针对这三个组件而言，**一个路由，可以包含多个断言，也可以包含多个过滤器。** 理解了这三个的关系，你就可以看看这三个组件是如何配合起来，共同构建出了网关的能力，也就是在一次请求到来时，这三个组件都干了什么。

当一个用户请求来的时候，会通过 `GatewayHandlerMapping`​ 确定一个路由，然后执行这个路由下定义的过滤器，最后将请求转发到下游的服务器。而在`GatewayHandlerMapping`​ 确定路由的时候，路由中的**断言**发挥了作用。大致的逻辑啊（猜的）就是GateWay可能会将每个定义好的路由中的断言都应用在每个请求上，如果这个请求满足这些断言，那么路由就确定了。

计算机是一门实践的科学，当你理解了某个工具的大致工作原理之后，接下来就是具体学习如何使用 路由，断言，过滤器，这个时候就需要你继续看文档了。或者看官方给的示例。

当你走完了这三步之后，你就基本掌握了核心内容了，接下来就是多多实践了。

# 小结

学习一个新工具，先要了解它提供的功能，也就是我们为什么要使用它，然后再去了解 他的工具原理，核心组件，架构图等等，也就是我们如何使用它，最后你就需要看看官方给的文档，代码示例，当然如果你还想深入学习的话，还有一步，即为什么这个工具要这样设计。

好了，我们利用GateWay，梳理了一下我学习新技术的方式，希望对你有帮助，最后别忘了还有AI这个朋友哦。

‍

‍

‍
